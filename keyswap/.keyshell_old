#!/bin/bash
# a shell script to generate a setxkbmap line and make it "autostart"
#Problem "~/.config/autostart/keymap.desktop: No such file or directory" ?!!
clear
echo "This Will help you make your keyboard multilayout easily. v1.0"
echo
echo "Enter your prefered layouts seprated by comma starting by the main layout, like \"us,ara,ru\""
read ly
echo "Enter your prefered way to toggle the keymap, like \"alt_shift\""
read wy
echo "Enter your prefered led to show that the alternative layout is chosen. like \"scroll\", You can enter \"none\" if you don't want"
read ld
#In the future versions will new features included :)
echo "Genterating now the command..."
kym="setxkbmap -layout \"$ly\" -option \"grp:${wy})_toggle,grp_led:${ld}\""
clear
echo "Line generated, Now making it \"autostart\""
mkdir ~/.config ~/.config/autostart &>/dev/null
filename="~/.config/autostart/keymap.desktop"
echo "[Desktop Entry]" > "$filename"
echo "Encoding=UTF-8" >> "$filename"
echo "Version=0.9.4" >> "$filename"
echo "Type=Application" >> "$filename"
echo "Name=KeyMap" >> "$filename"
echo "Exec=${kym}" >> "$filename"
echo "StartupNotify=false" >> "$filename"
echo "Terminal=false" >> "$filename"
echo "Hidden=false" >> "$filename"
echo
echo "Done!"
exit 0
